<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
    <link href="style2.css" rel="stylesheet">
    <title>登录客户端</title>

</head>
 
<body onload="randoms()">
    <section>
        <div class="color"></div>
        <div class="color"></div>
        <div class="color"></div>
        <div class="box">
            <div class="circle" style="--x:0"></div>
            <div class="circle" style="--x:1"></div>
            <div class="circle" style="--x:2"></div>
            <div class="circle" style="--x:3"></div>
            <div class="circle" style="--x:4"></div>
            <div class="container">
                <div class="form">
                    <h2>登录</h2>
                    <div>
                       <form id="loginForm" onsubmit="login(event)">
                           <label for="email">邮箱：</label><br>
                           <input type="email" id="email" name="email" required><br>
                           <label for="username">用户名：</label><br>
                           <input type="text" id="username" name="username" required><br>
                           <button type="submit">登录</button>
                       </form>
                    </div>
                    <div id="loginResult"></div>
                </div>
            </div>
        </div>
    </section>
	<script>
	    function login(event) {
	        event.preventDefault(); // 阻止表单提交
	        var form = document.getElementById('loginForm');
	        var formData = new FormData(form);
	
	        var email = formData.get('email');
	        var username = formData.get('username');
	
	        // 获取用户数据
	        fetch('https://prisma-d1-example.3109613603.workers.dev/')
	            .then(response => {
	                if (!response.ok) {
	                    throw new Error('网络响应异常');
	                }
	                return response.json();
	            })
	            .then(data => {
	                // 检查返回的数据中是否存在用户
	                var user = data.find(u => u.email === email && u.name === username);
	                if (user) {
	                    // 用户存在，执行相关操作（例如：重定向到仪表板）
	                    alert('登录成功！');
	                    // 重定向或执行其他操作
	                } else {
	                    // 用户不存在
	                    alert('邮箱或用户名无效，请重试。');
	                }
	            })
	            .catch(error => {
	                console.error('获取数据时出现问题：', error);
	                alert('登录失败，请重试。');
	            });
	    }
	</script>
</body>
 
</html>



